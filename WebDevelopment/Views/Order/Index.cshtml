@{
    Layout = "_Layout";
}

<section class="order" id="order">
    <div class="container">
        <div class="order-title common-title">Оформление заказа</div>
        <img src="images/flower4.png" alt="заказ" class="order-img">
        <div class="order-form">
            <div class="order-form-text">
                Заполните все данные и наш менеджер свяжется с вами для подтверждения
                заказа
            </div>
            <div class="order-form-inputs">
                <!-- Выбор типа букета -->
                <div class="order-form-input">
                    <label for="bouquet-type">Выберите тип букета:</label><br>
                    <select id="bouquet-type" onchange="showInputs()">
                        <option value="--">--</option>
                        <option value="готовый">Готовый букет</option>
                        <option value="составить">Составить букет</option>
                        <option value="неважно">Не важно</option>
                    </select>
                </div>
                <!-- Список готовых букетов -->
                <div id="preset-bouquets" class="order-form-input" style="display:none;">
                    <label for="preset-bouquet">Список готовых букетов:</label>
                    <select id="preset-bouquet">
                    </select>
                </div>
                <!-- Составление букета -->
                <div id="custom-bouquet" style="display:none;">
                    <h3>Составить букет</h3>
                    <div id="flower-container"></div>
                    <button id="add-flower-button">Добавить цветок</button>
                </div>
                <!-- Не важно -->
                <div id="budget" class="order-form-input" style="display:none;">
                    <label for="amount">На какую сумму?</label>
                    <input type="text" placeholder="Сумма" id="amount">
                    <div id="price">$</div>
                </div>
                <!-- Ввод данных покупателя -->
                <div class="order-form-input">
                    <input type="text" placeholder="Ваша фамилия" id="last-name">
                </div>
                <div class="order-form-input">
                    <input type="text" placeholder="Ваше имя" id="name">
                </div>
                <div class="order-form-input">
                    <input type="text" placeholder="Ваш телефон" id="phone">
                </div>
                <div class="order-form-input">
                    <input type="text" placeholder="Ваш адрес" id="address">
                </div>
                <button class="button" id="order-action">Оформить заказ</button>
            </div>
        </div>
    </div>
</section>

<script>
    document.getElementById("change-money").onclick = function (e) {
        // Запоминаем, какая валюта сейчас
        let currentCurrency = e.target.innerText;
        let newCurrency = "$";

        // Определяем, какую валюту устанавливаем
        if (currentCurrency === "$") {
            newCurrency = "₽";
        } else if (currentCurrency === "₽") {
            newCurrency = "BYN";
        } else if (currentCurrency === 'BYN') {
            newCurrency = '€';
        } else if (currentCurrency === '€') {
            newCurrency = '¥';
        }

        // Обновляем текст на кнопке
        e.target.innerText = newCurrency;

        // Получаем элемент с ценой
        let priceElement = document.getElementById("price");

        // Обновляем элемент с ценой
        priceElement.innerText = newCurrency; // Объединяем валюту и цену
    }


    // Функция для отображения элементов в зависимости от выбранного букета
    function showInputs() {
        const bouquetType = document.getElementById("bouquet-type").value;
        document.getElementById("preset-bouquets").style.display = "none";
        document.getElementById("custom-bouquet").style.display = "none";
        document.getElementById("budget").style.display = "none";

        if (bouquetType === "готовый") {
            const presetBouquets = ["Букет 1", "Букет 2", "Букет 3"];
            const presetSelect = document.getElementById("preset-bouquet");
            presetSelect.innerHTML = ""; // Очищаем существующие варианты
            presetBouquets.forEach(bouquet => {
                const option = document.createElement("option");
                option.value = bouquet;
                option.textContent = bouquet;
                presetSelect.appendChild(option);
            });
            document.getElementById("preset-bouquets").style.display = "block";
        } else if (bouquetType === "составить") {
            document.getElementById("custom-bouquet").style.display = "block";
            addFlowerInput(); // Автоматически добавляем первый селект с цветом и количеством
        } else if (bouquetType === "неважно") {
            document.getElementById("budget").style.display = "block";
        }
    }
    let divsFlowers=[];
    // Функция для добавления нового селекта с цветами и полем количества
    function addFlowerInput() {
        const flowers = ["Роза", "Астра", "Тюльпан"];
        const container = document.getElementById("flower-container");
        const flowerDiv = document.createElement("div");
        flowerDiv.className = "flower-input";

        // Создаём селект для выбора цвета
        const flowerSelect = document.createElement("select");
        flowers.forEach(flower => {
            const option = document.createElement("option");
            option.value = flower;
            option.textContent = flower;
            flowerSelect.appendChild(option);
        });

        // Создаём поле для ввода количества
        const quantityInput = document.createElement("input");
        quantityInput.type = "number";
        quantityInput.min = "1";
        quantityInput.placeholder = "Количество";

        // Создаем кнопку для удаления этого селекта
        const removeButton = document.createElement("button");
        removeButton.textContent = "Удалить";
        removeButton.onclick = function () {
            container.removeChild(flowerDiv);
            // Удаляем из массива divsFlowers
            divsFlowers = divsFlowers.filter(div => div !== flowerDiv);
        };

        // Добавляем селект, поле ввода и кнопку удаления в контейнер
        flowerDiv.appendChild(flowerSelect);
        flowerDiv.appendChild(quantityInput);
        flowerDiv.appendChild(removeButton);
        container.appendChild(flowerDiv);

        // Добавляем созданный div в массив divsFlowers
        divsFlowers.push(flowerDiv);
    }

    // Добавляем глобальную функцию для добавления новых цветков
    document.getElementById("add-flower-button").onclick = addFlowerInput;

</script>